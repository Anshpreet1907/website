{% extends 'layouts/base.html' %} {% load static %} {% block content %}

<main>
    <section style="background-color:#ffc107; padding:6rem 0 4rem;">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">

                    <!-- Card -->
                    <div class="card shadow-sm p-4 rounded-4" style="background:#fff;">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h3 class="fw-bold m-0">Cyber Progress</h3>
                            <div class="small text-secondary">
                                <span class="me-3"><span class="legend-dot dot-earned"></span> Earned</span>
                                <span><span class="legend-dot dot-locked"></span> Locked</span>
                            </div>
                        </div>

                        <!-- Progress -->
                        <div class="mb-3 d-flex justify-content-between">
                            <span class="fw-semibold">Overall Progress</span>
                            <span id="pctText" class="fw-semibold">0%</span>
                        </div>
                        <div class="progress mb-4" style="height:12px; border-radius:50px;">
                            <div id="pctBar" class="progress-bar bg-dark" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:0%; border-radius:50px;">
                            </div>
                        </div>

                        <!-- Pills -->
                        <div id="pillGrid" class="d-flex flex-wrap gap-3"></div>
                    </div>

                    <!-- Back button -->
                    <div class="text-center mt-5">
                        <a href="{% url 'challenge_list' %}" class="btn btn-dark">
              ⬅️ Back to Challenges
            </a>
                    </div>

                </div>
            </div>
        </div>
    </section>
</main>

<style>
    .legend-dot {
        display: inline-block;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        margin-right: 6px;
    }
    
    .dot-earned {
        background: #2d3748;
    }
    
    .dot-locked {
        background: #cfd6de;
    }
    
    .pill {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 14px;
        border-radius: 999px;
        min-width: 160px;
        font-weight: 600;
        font-size: 0.9rem;
    }
    
    .pill .pill-text {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .pill .pill-state {
        margin-left: auto;
        font-size: 12px;
        font-weight: 700;
        padding: 4px 8px;
        border-radius: 20px;
    }
    
    .pill.earned {
        background: #2d3748;
        color: #fff;
    }
    
    .pill.earned .pill-text {
        color: #fff;
    }
    
    .pill.earned .pill-state {
        background: rgba(255, 255, 255, .2);
        color: #fff;
    }
    
    .pill.locked {
        background: #fff;
        border: 1px solid #e2e8f0;
        color: #64748b;
    }
    
    .pill.locked .pill-text {
        color: #64748b;
    }
    
    .pill.locked .pill-state {
        background: #eef2f6;
        color: #64748b;
    }
</style>

<script>
    const categories = [{
        name: "Binary_Exploitation",
        completed: false
    }, {
        name: "Crypto",
        completed: false
    }, {
        name: "Databases",
        completed: false
    }, {
        name: "Javascript",
        completed: false
    }, {
        name: "Linux",
        completed: false
    }, {
        name: "Network",
        completed: false
    }, {
        name: "Python",
        completed: false
    }, {
        name: "Reverse_Engineering",
        completed: false
    }, {
        name: "Web",
        completed: false
    }, {
        name: "Web_Security",
        completed: false
    }, ];

    // Render pills
    const grid = document.getElementById('pillGrid');
    categories.forEach(c => {
        const pill = document.createElement('div');
        pill.className = `pill ${c.completed ? 'earned' : 'locked'}`;
        pill.innerHTML = `
      <span class="pill-text">${c.name}</span>
      <span class="pill-state">${c.completed ? 'Earned' : 'Locked'}</span>
    `;
        grid.appendChild(pill);
    });

    // Progress
    const completedCount = categories.filter(c => c.completed).length;
    const pct = Math.round((completedCount / categories.length) * 100);
    document.getElementById('pctText').innerText = pct + '%';
    document.getElementById('pctBar').style.width = pct + '%';
</script>

{% endblock content %}